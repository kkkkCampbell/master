# openwrt_full_backup
[![CI](https://github.com/nagual2/openwrt-extended-backup/actions/workflows/ci.yml/badge.svg)](https://github.com/nagual2/openwrt-extended-backup/actions/workflows/ci.yml)

Скрипт создаёт полную архивную копию роутера под управлением OpenWRT.
Архивируются все настройки и все установленные пользователем программы.
Восстановление штатное, через интерфейс роутера.   
  Обычно "Система - Восстановление/Обновление, Восстановить резервную копию".

## ВНИМАНИЕ! 
Архив сохраняется в ОЗУ роутера! После перезагрузки роутера он исчезнет!!!



## Инструкция к openwrt_full_backup

Запускаете, по выполнению жёлтым напишет, откуда забирать.
Восстановление через штатный "восстановильщик" роутера:  
#### Система - Восстановление/Обновление, Восстановить резервную копию

Перед восстановлением роутер обязательно сбросить до настроек по умолчанию (reset). Обязательно, это ОБЯЗАТЕЛЬНО. Не сбросите - я не виноват.
Восстанавливать строго на ту же версию прошивки, с которой снят архив. Гуру могут восстанавливать хоть на холодильник, им - можно.  
После выполнения скрипт оставляет свою локальную копию в системе, в дальнейшем можно запускать так:  
#### /backup  
  
Если в системе не установлен ksmbd, будет предложено его установить.  
При отказе от установки ksmbd архив забирать из папки /tmp/archive роутера (SCP/FTP), при согласии из \\router.ip.add.ress\archive  

На запрос авторизации при доступе к роутеру по локальной сети (актуально для Windows 11 в основном) ввести:
  
Логин: RR  
Пароль: 12345  
  
Запуск скрипта:
```
wget https://raw.githubusercontent.com/nagual2/openwrt-extended-backup/main/scripts/openwrt_full_backup -O /backup && \
chmod +x /backup && /backup
```

# user_installed_packages

Выводит список пакетов, установленных на OpenWRT пользователем. Руками, или через скрипты.

Запуск скрипта:

```
sh <(wget -qO- https://raw.githubusercontent.com/nagual2/openwrt-extended-backup/main/scripts/user_installed_packages)
```
